{% extends "base.html" %}

{% block content %}
    <h1 class="text-center font-weight-light font-italic">Your tickets</h1>
    <hr>
    <div class="container">
        <div class="row">
            <div class="col col-12 col-sm-6">
                <div class="card">
                    <div class="card-header">
                        <p class="my-0">Sent ({{ sent | length }})</p>
                    </div>
                    <ul class="list-group list-group-flush">
                        {% for ticket in sent %}
                            <li class="list-group-item">
                                <div class="d-flex flex-column">
                                    <h4>{{ ticket.pickup_time }}</h4>
                                    <h5></h5>
                                </div>
                                <p>{{ ticket.recipient }}</p>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            <div class="col col-12 col-sm-6">
                <div class="card">
                    <div class="card-header">
                        <p class="my-0">Received ({{ received | length }})</p>
                    </div>
                    <ul class="list-group list-group-flush">
                        {% for ticket in received %}
                            <li class="list-group-item">
                                <div class="d-flex flex-column">
                                    <h4>{{ ticket.pickup_time }}</h4>
                                    <h5></h5>
                                </div>
                                <p>{{ ticket.sender }}</p>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>

{% endblock %}
{% block scripts %}
    {{ super() }}
    <script>
        $(document).ready(function () {
                {#console.log(`current time = ${$('#pickup-time').val()}`);#}
                // set pickup time to 5 minutes from now
                // $('#delivery-time').val(moment().add(5, 'minutes').format('H:mm'));
            }
        );

        function addTime(amount, scale) {
            let picker = $('#pickup-time');
            // console.log(`current time = ${picker.val()}`);
            $('#pickup-now').prop("checked", amount === 0);

            console.log(`adding ${amount} ${scale}`);
            picker.val(moment().add(amount, scale).format('H:mm'))
        }

        function validatePickup() {
            let form = $('#pickup-form');
            console.log();
        }


    </script>
{% endblock %}
